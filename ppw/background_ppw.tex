\section{Background}
In this section, we first present the Amdahl's law and performance-per-watt's traditional expression in multi-core processor. Then the static power modeling and thermal modeling is introduced, with which we can revise the expression of performance-per-watt in multi-core processor.

\subsection{Amdahl's law}
Amdahl's law put an upper bound for the speedup that a multi-core processor can achieve by parallelization as:
\begin{equation}\label{speedup}
Perf = \frac{1} {(1-f)+f/n}
\end{equation}
where $n$ is the number of cores, and $f$ is the fraction of a program's execution time that is parallelizable $(0 \le k \le 1)$. Noted that, (1) is purely theroretical for it doesn't consider any constraints such as power budget.

The average power consumption of the many-core processor is as follows:
\begin{equation}\label{average_power}
W = \frac{P_{1} \times (1-f)+P_{n} \times f/n}{(1-f)+f/n},
\end{equation}
in which, $P_{1}$ is the power consumption during the sequential computation process, $P_{n}$ is the power consumption during the parallel computation process.

$Perf/W$ of a many-core processor is expressed as:
\begin{equation}\label{ppw}
\begin{split}
\frac{Perf}{W} &= \frac{1}{(1-f)+f/n} \times \frac{(1-f)+f/n}{P_{1} \times (1-f)+P_{n} \times f/n}\\
&= \frac{1}{P_{1} \times (1-f)+P_{n} \times f/n}
\end{split}
\end{equation}

$P_{1}$ is composed of power consumption of 1 active core and $n-1$ idle cores, if we assume that the power consumption of 1 active core is 1, without consideration of thermal constraints, $P_{1}$ can be expressed as $1+(n-1)k$, in which $k$ stands for the fraction of power the processor consumes in idle state $(0 \le k \le 1)$. For parallel computation phase, $P_{n}$ consists of power consumption of $n$ active cores, which can be similarly expressed as $n$. By replacing $P_{1}$ and $P_{n}$ in (3) with above expressions, we can get
\begin{equation}\label{ppw}
\frac{Perf}{W} = \frac{1}{1+k(n-1)(1-f)}
\end{equation}

% In (4), we ignore the impact of temperature on power consumption of cores, which is 
% With (4) we can plot the relation between performance-per-watt and the number of cores and $f$. 

\subsection{Static power modeling}

It is widely acknowledged that the total power of a chip is composed of dynamic and static power. The dynamic power is dependent on the activities of the chip, therefore it's easily estimated by methods implemented with performance counter. Yet the static power $p_{s}$ of the chip is caused by leakage current $I_{leak}$ as:
\begin{equation}\label{ps}
p_{s} = V_{dd}I_{leak}
\end{equation}
Due to the non-linear relationship between $I_{leak}$ and temperature, static power is also sensitive to temperature, which makes it hard to obtain. 

$I_{leak}$ is composed of many components, including subthreshold current, gate current, reverse-biased junction leakage current, et cetera. Among which, subthreshold current and gate current are the main parts of leakage current, therefore $I_{leak}$ can be approximated as:
\begin{equation}\label{I_leak}
I_{leak}=I_{sub}+I_{gate}
\end{equation}

Noted that $I_{gate}$ is cause by tunneling between the gate terminal and the other three terminals, does not depend on temperature and can be considered as a technology-dependent constant. Yet $I_{sub}$ is considered to be highly related to temperature, and can be modeled in the commonly accepeted MOSFET transitor model BSIM 4 as:
\begin{equation}\label{I_sub}
I_{sub}=Kv_{T}^{2}e^{\frac{V_{GS}-V_{th}} {\eta v_{T}}} (1-e^{\frac {-V_{DS}} {v_{T}} })\approx Kv_{T}^{2}e^{\frac{V_{GS}-V_{th}}{\eta v_{T}}}
\end{equation}

\subsection{Thermal modeling}
In this work, the multi-core dark silicon system is packaged in a common structure in Fig. x. 
To estimate the power consumption of a IC chip, we first divide the chip and its package into multiple blocks called thermal nodes, with partition granularity determined by the accuracy requirements. For the dark silicon multi-core system (a 16-core chip's floorplan example is shown in Fig. x), we treat each core as a thermal node with a current source, because each core has very small area and highly correlated internal power distribution. The other thermal nodes from the package are divided according to the chip thermal nodes. Then, the thermal resistance and capacitance among these thermal nodes are determinded, which model the thermal transport and power response behaviors. Please note that multi-core system floorplan different from the one shown in Fig. x are fullly compatible with this work, and each core's internal structure can also be modeled if necessary. With above mentioned information, the thermal mdoel for a chip with $n$ total thermal nodes can be generated:
\begin{equation}\label{gt=bp}
\begin{split}
GT(t) + C\frac{dT(t)}{dt} &= BP_{T}\\
T_{c}(t) &= LT_{t}
\end{split}
\end{equation}
where $T(t) \in \mathbb{R}^n$ is the temperature vector (distinguished from $T_p$, which is a scalar representing temperature at only one place), representing temperatures at $n$ places of the chip and package; $G \in \mathbb{R}^{n\times n}$ and  $C \in \mathbb{R}^{n \times n}$ contain equivalent thermal resistance and capacitance information respectively; $B \in \mathbb{R}^{n \times l}$ stores the information of how powers are injected into the thermal nodes; $P(T, t) \in \mathbb{R}^{l}$ is the power vector, which contains power consumptions of $l$ components on chip, including both dynamic power vector $P_d$ and static power vector $P_s$, i.e., $P(T, t)=P_s(T, t)+P_d(t)$, reminding that static power $P_s(T, t)$ is actually a function of temperature $T$;  $T_{c}(t) \in \mathbb{R}^m$ is the output temperature vector, containing only temperatures of thermal nodes that the user is interested in, for example, thermal nodes on the chip only (excluding package thermal nodes); $L \in \mathbb{R}^{m \times n}$ is the corresponding output selection matrix which selects the $m$ chip temperatures from $T(t)$.

By applying thermal model, the effect of temperature on cores can be introduced. Through appropriate search methods, the distribution of light core with the maximum PPW for number of light core from 1 to n can be specified.



