\section{RELATED WORK AND MOTIVATION}
\label{sec:related_works}
Power consumption has remained as one of the most important design constraints for many years. Typically, due to limited cooling capability and demand for higher performance, power budgeting and dynamic thermal management have become crucial.

Several techniques have been successfully applied for power budgeting in multi-core systems under thermal constraint. For instance, there are methods that employ dynamic voltage and frequency scaling (DVFS) to limit the system power consumption in order to keep the temperature under thermal constraints for both single-core system~\cite{Skadron:MICRO'03}, multi-core system~\cite{Jayaseelan:ICCAD'09}, and 3D IC~\cite{Coskun:DATE'09}. There are also researches that implement task migration to switch heavy and light tasks to meet the temperature constraint~\cite{Ge:DAC'10},~\cite{Chantem:TVLSI'11},~\cite{Liu:DATE'12}. DVFS and per-core power gating are exploited in~\cite{Lee:TVLSI'12} to achieve potential throughput improvement. The work presented in~\cite{Kultursay:CHSCSS'12} implements a reactive dynamic power partitioning 
algorithm to distribute the power budget unevenly among two CPU power domains to maximize instructions per second. %The above mentioned works are dedicated to improving performance of the system, the energy efficiency of them are not satisfactory.

The energy efficiency of multi-core IC systems has been studied by several researchers. Dynamic voltage scaling and dynamic core scaling are implemented in~\cite{Seo:TPDS'08} for energy saving. ~\cite{Majzoub:TCAD'10},~\cite{Kong:DATE'11} show how to determine the number of active cluster, task partition and frequency assignment for cluster-based multi-core system to reach higher energy efficiency. Methods to reduce the cost of data center operation by energy-efficient computing are presented in~\cite{Pedram:TCAD'12},~\cite{Wang:access'17}. Carrol and Heiser~\cite{Carroll:RTAS'14} investigate improving energy efficiency by frequency scaling and core offlining on mobile devices. Annamalai et al.~\cite{Annamalai:ISVLSI'14} describe a dynamic resource allocation and dynamic voltage and frequency adaptation based solution for determining the transient core speeds to maximize energy per instruction. Cochran et al.~\cite{Cochran:ICCAD'11} formulate a multinomial logistic regression model to estimate the optimal operating points. A hierarchical framework is proposed to address the problem of minimizing the energy consumption while maintaining a required throughput in~\cite{Ghasemazar:ISCAS'10}. Numerical analysis on energy efficiency of multi-core systems were studies in~\cite{Woo:Computer'08},~\cite{Hill:Computer'08},\cite{Sun:JPDC'10}. In~\cite{Hanumaiah:TCOMP'14}, techniques include DVFS, task migration and active cooling are implemented to achieve high energy efficiency for multi-core systems.

As discussed above, some of the limitations of the aforementioned works are as follows:
\begin{itemize}  
\item The dependence of leakage power to voltage and temperature is neglected. In dark silicon systems, leakage power is a major component of the whole power, and the simplified expression of leakage power may cause large error in leakage power estimation, which would result in energy efficiency degradation of the provided power budget;
\item The DVFS stage of cores cannot be adjusted independently. Considering the DVFS stages of cores in optimal energy efficiency may not be the same, this independence would limit the maximum PPW of the system;
%\item The thermal model does not distinguish the die and the package;
%due to the high overhead of providing optimal DVFS stage for each core, 
\item The thermal interaction among cores are neglected. In dark silicon systems, the thermal interaction among cores are considerable. The energy-efficient power budget obtained without consideration of the thermal interaction will notably deviate from the optimal one, which would bring energy efficiency degradation of the provided power budget.
\end{itemize} 

In this work, we propose an energy-efficient dynamic power budgeting method to compute the power budget accurately and efficiently for dark silicon multi-core system, which can maximize the energy efficiency of the system without limitations mentioned above. Our major contributions are summarized as follows:
\begin{itemize}
% \item By analyzing the characteristics of PPW, we find that, for each active core number, we can generate a $\hat{T}_{opt}$, as long as the $\hat{T}_{opt}$ is applied to all active cores, maximum PPW of the system can be obtained, while the performance of the system varies with the active core distribution.
% \item Based on the analysis above, we propose to formulate the power budgeting problem as minimizing the difference between $\hat{T}_{opt}$ and all cores' temperature, with greedy based acceleration, our method is capable of providing accurate power budget at runtime.
% \item We show that our method can consider the transient temperature effect, by providing accurate power budget which automatically adapts to current running conditions of the system. We also show that our method can provide PPW boost when the system is at low temperature.

\item By analyzing the characteristics of PPW, we find that, for each fixed active core distribution, there is a $T_{opt}$, the PPW of the system can be maximized by minimizing the difference between $T_{opt}$ and all cores' temperature $T_{c}$. Therefore, once $T_{opt}$ is obtained, the power budget that leads to optimal PPW for this active core distribution can be calculated easily.
%as long as the difference between $\hat{T}_{opt}$ and $T_{c}$ is minimized,
\item To reduce the high overhead of obtaining $T_{opt}$ for all active core distributions, we reveal that, for all active core distributions of the same active core number, with isolation of cores and temperature compensation, a $\hat{T}_{opt}$ can be obtained to stand for the optimal temperature of all cores, as long as the $\hat{T}_{opt}$ is applied to all active cores, sub-optimal PPW of the system can be obtained, while the performance of the system varies with the active core distribution. This property ensures that the power budgeting problem can be formulated as a temperature oriented optimization problem with low overhead.
\item To reduce the high computational complexity of the optimization problem, we apply greedy based acceleration to the optimization problem, which can be solved with low complexity. Hence our method is capable of providing accurate energy-efficient power budget at runtime.
\item Our method can consider the transient temperature effect, therefore providing accurate power budget which automatically adapts to current running conditions of the system. We prove our method can provide "PPW boost" at low temperature, which enables a constant "PPW boost" by dynamically switching active core distributions.
\end{itemize} 